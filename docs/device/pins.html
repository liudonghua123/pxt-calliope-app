<!DOCTYPE html>
<html lang="" xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#"
	xmlns:fb="http://www.facebook.com/2008/fbml">

<head>
	<meta charset="UTF-8">
	<title>Microsoft MakeCode for Calliope mini</title>
	<meta name="Description" content="A Blocks / JavaScript code editor for the Calliope mini powered by Microsoft MakeCode." />

	<!-- ifdef incontexttranslations endif -->
	
<!-- include meta.html -->
<!-- This file is typically overriden by the target, with own Twitter
     account etc. Most data is taken from the theme file though.  
  -->

<!-- include robotsmeta.html -->

<!-- end include robotsmeta.html -->

<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@msmakecode" />
<meta name="twitter:title" content="Microsoft MakeCode for Calliope mini" />
<meta name="twitter:description" content="A Blocks / JavaScript code editor for the Calliope mini powered by Microsoft MakeCode." />
<meta name="twitter:image" content="/static/mb/device/pins-0.png" />

<meta property="og:title" content="Microsoft MakeCode for Calliope mini" />
<meta property="og:site_name" content="Microsoft MakeCode" />
<meta property="og:type" content="website" />
<meta property="og:description" content="A Blocks / JavaScript code editor for the Calliope mini powered by Microsoft MakeCode." />
<meta property="fb:app_id" content="" />
<meta property="og:image" content="/static/mb/device/pins-0.png" />

<meta name="format-detection" content="telephone=no">
<link rel="apple-touch-icon" href="docs/static/icons/apple-touch-icon.png">
<link rel="icon" type="image/png" href="docs/static/icons/apple-touch-icon.png">
<link rel="shortcut icon" href="docs/static/icons/apple-touch-icon.png">
<meta name="theme-color" content="#249899">

<!-- end include meta.html -->

	
<!-- include head.html -->
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width,height=device-height,user-scalable=no,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0">

<link rel="stylesheet" data-rtl="/blb/rtlsemantic.css" href="/pxt-calliope-app/semantic.css" />
<link id="blocklycss"  data-rtl="/blb/rtlblockly.css" rel="stylesheet" href="/pxt-calliope-app/blockly.css" />
<link rel="stylesheet" href="/pxt-calliope-app/docfiles/style.css" />
<link rel="stylesheet" href="/pxt-calliope-app/docfiles/vs.css" />
<link rel="stylesheet" href="/pxt-calliope-app/docfiles/target.css" />

<script src="/pxt-calliope-app/jquery.js" type="text/javascript"></script>
<script src="/pxt-calliope-app/semantic.js" type="text/javascript"></script>
<script src="/pxt-calliope-app/docfiles/target.js" type="text/javascript"></script>
<script src="/pxt-calliope-app/embed.js" type="text/javascript"></script>
<script src="/pxt-calliope-app/docfiles/docs.js" type="text/javascript"></script>

<style>
    
.ui.accent { color: #249899; }
.ui.inverted.accent { background: #249899; }

</style>

<!-- end include head.html -->


</head>

<body id='root' class='root'>
	<div id="accessibleMenu" class="ui accessibleMenu borderless fixed menu docs" role="menubar">
		
            <a href="#maincontent" class="ui item link" tabindex="0" role="menuitem">Skip to main content</a>
        
	</div>

	
<!-- include tocheader.html -->
<div id="top-bar" class="ui fixed accent borderless inverted main menu hideprint docs" role="menubar">
    <div>
        
            <a id="togglesidebar" class="launch icon item" tabindex="0" title="Side menu" aria-label="Side menu" role="menuitem" aria-expanded="false">
                <i class="content icon"></i>
            </a>
        
        <div class="item" role="menuitem">
            <div class="header-org-logo">
                <img src="/static/logo/Microsoft_logo_rgb_W-white_D.png" alt="Microsoft">
            </div>
            <div class="header-org-logo-sm">
                <img src="/static/logo/Microsoft_logo_rgb_W-white_D-square.png" alt="Microsoft">
            </div>
            <div class="header-title"><span>MakeCode</span></div>
        </div>
    </div>
    <div>
        <div class="item">
            <form id="tocsearch1" class="search" role="form" method="get" action="https://www.bing.com/search">
                <div class="ui fluid icon input">
                    <input type="hidden" name="q1" value="site:https://makecode.calliope.cc/" />
                    
                <input type="search" name="q" placeholder="Search..." aria-label="Search Documentation">
                <i onclick="document.getElementById('tocsearch1').submit();" tabindex="0" class="search link icon" aria-label="Search" role="button"></i>
            
                </div>
            </form>
        </div>
    </div>
</div>

<div id="side-menu" class="ui vertical accent inverted sidebar menu left hideprint docs" role="menubar">
    <!-- TOC Menu (tocheader.html) -->
    <div class="menuContainer" role="menu">
        
    <a class="item " href="/pxt-calliope-app/docs/about.html" role="menuitem">About</a>


    <a class="item " href="/pxt-calliope-app/docs/faq.html" role="menuitem">FAQ</a>


    <a class="item " href="/pxt-calliope-app/docs/projects.html" role="menuitem">Projects</a>


    <a class="item " href="/pxt-calliope-app/docs/github.html" role="menuitem">GitHub</a>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/pxt-calliope-app/docs/blocks.html">Blocks</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/pxt-calliope-app/docs/blocks/on-start.html" role="menuitem">On Start</a>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/pxt-calliope-app/docs/blocks/loops.html">Loops</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/pxt-calliope-app/docs/blocks/loops/repeat.html" role="menuitem">repeat</a>


    <a class="item " href="/pxt-calliope-app/docs/blocks/loops/for.html" role="menuitem">for</a>


    <a class="item " href="/pxt-calliope-app/docs/blocks/loops/while.html" role="menuitem">while</a>


    <a class="item " href="/pxt-calliope-app/docs/blocks/loops/for-of.html" role="menuitem">for of</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/pxt-calliope-app/docs/blocks/logic.html">Logic</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/pxt-calliope-app/docs/blocks/logic/if.html" role="menuitem">if</a>


    <a class="item " href="/pxt-calliope-app/docs/blocks/logic/boolean.html" role="menuitem">Boolean</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/pxt-calliope-app/docs/blocks/variables.html">Variables</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/pxt-calliope-app/docs/blocks/variables/assign.html" role="menuitem">assign</a>


    <a class="item " href="/pxt-calliope-app/docs/blocks/variables/change.html" role="menuitem">change var</a>


    <a class="item " href="/pxt-calliope-app/docs/blocks/variables/var.html" role="menuitem">var</a>

        </div>
    </div>


    <a class="item " href="/pxt-calliope-app/docs/blocks/math.html" role="menuitem">Math</a>


    <a class="item " href="/pxt-calliope-app/docs/blocks/javascript-blocks.html" role="menuitem">JavaScript blocks</a>


    <a class="item " href="/pxt-calliope-app/docs/blocks/custom.html" role="menuitem">Custom blocks</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/pxt-calliope-app/docs/python.html">Python</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/pxt-calliope-app/docs/python/call.html" role="menuitem">Calling</a>


    <a class="item " href="/pxt-calliope-app/docs/python/sequence.html" role="menuitem">Sequencing</a>


    <a class="item " href="/pxt-calliope-app/docs/python/variables.html" role="menuitem">Variables</a>


    <a class="item " href="/pxt-calliope-app/docs/python/operators.html" role="menuitem">Operators</a>


    <a class="item " href="/pxt-calliope-app/docs/python/statements.html" role="menuitem">Statements</a>


    <a class="item " href="/pxt-calliope-app/docs/python/functions.html" role="menuitem">Functions</a>


    <a class="item " href="/pxt-calliope-app/docs/python/classes.html" role="menuitem">Classes</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/pxt-calliope-app/docs/javascript.html">JavaScript</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/pxt-calliope-app/docs/javascript/call.html" role="menuitem">Calling</a>


    <a class="item " href="/pxt-calliope-app/docs/javascript/sequence.html" role="menuitem">Sequencing</a>


    <a class="item " href="/pxt-calliope-app/docs/javascript/variables.html" role="menuitem">Variables</a>


    <a class="item " href="/pxt-calliope-app/docs/javascript/operators.html" role="menuitem">Operators</a>


    <a class="item " href="/pxt-calliope-app/docs/javascript/statements.html" role="menuitem">Statements</a>


    <a class="item " href="/pxt-calliope-app/docs/javascript/functions.html" role="menuitem">Functions</a>


    <a class="item " href="/pxt-calliope-app/docs/javascript/types.html" role="menuitem">Types</a>


    <a class="item " href="/pxt-calliope-app/docs/javascript/classes.html" role="menuitem">Classes</a>


    <a class="item " href="/pxt-calliope-app/docs/javascript/interfaces.html" role="menuitem">Interfaces</a>


    <a class="item " href="/pxt-calliope-app/docs/javascript/generics.html" role="menuitem">Generics</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/pxt-calliope-app/docs/types.html">Types</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/pxt-calliope-app/docs/types/number.html" role="menuitem">Number</a>


    <a class="item " href="/pxt-calliope-app/docs/types/string.html" role="menuitem">String</a>


    <a class="item " href="/pxt-calliope-app/docs/types/boolean.html" role="menuitem">Boolean</a>


    <a class="item " href="/pxt-calliope-app/docs/types/array.html" role="menuitem">Array</a>


    <a class="item " href="/pxt-calliope-app/docs/types/function.html" role="menuitem">Function</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="">Miscellaneous</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/pxt-calliope-app/docs/about.html" role="menuitem">About</a>


    <a class="item " href="/pxt-calliope-app/docs/support.html" role="menuitem">Support</a>


    <a class="item " href="/pxt-calliope-app/docs/translate.html" role="menuitem">Translate</a>


    <a class="item " href="/pxt-calliope-app/docs/share.html" role="menuitem">Sharing projects</a>


    <a class="item " href="/pxt-calliope-app/docs/offline.html" role="menuitem">Offline support</a>


    <a class="item " href="/pxt-calliope-app/docs/save.html" role="menuitem">Save</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="">Developers</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/pxt-calliope-app/docs/cli.html" role="menuitem">Command Line Interface</a>


    <a class="item " href="/pxt-calliope-app/docs/code.html" role="menuitem">Visual Studio Code support</a>


    <a class="item " href="/pxt-calliope-app/docs/blocks-embed.html" role="menuitem">Blocks Embed</a>

        </div>
    </div>

    </div>
</div>
<!-- end include tocheader.html -->


	<div id="docs" class="pusher">

		<div class="article" id="maincontent">
			<div class="article-inner">

				
<!-- include header.html -->
<div class="ui one column padded grid hideprint">
    <div class="column ui container">
        
    </div>
</div>
<!-- end include header.html -->


				<div class="main ui container fluid mainbody">
					<button id="printbtn" class="circular ui icon right floated button hideprint hidemobile"
						title="Print" aria-label="Print">
						<i class="icon print"></i>
					</button>
					
    <div class="ui text">
        <h1 id="calliope-mini-pins">Calliope mini pins</h1><p>The Calliope mini pins </p>
<p><img class="ui image" src="/static/mb/device/pins-0.png" alt="" loading="lazy"></p>
<p>The Calliope mini has 25 external connections on the edge connector of the board, which we refer to as ‘pins’.  The edge connector is the grey area on the right side of the figure above.</p>
<p>There are five large pins, that are also connected to holes in the board labelled: 0, 1, 2, 3V, and GND. And along the same edge, there are 20 small pins that you can use when plugging the Calliope mini into an edge connector.</p>
<h2 id="large-pins">Large pins</h2><p>You can easily attach crocodile clips or 4mm banana plugs to the five large pins.</p>
<p>The first three, labelled 0, 1 and 2 are flexible and can be used for many different things - which means they are often called ‘general purpose input and output’ (shortened to GPIO). These three pins also have the ability to read analogue voltages using something called an analogue-to-digital converter (ADC). They all have the same function:</p>
<ul>
<li><strong>0</strong>: GPIO (general purpose digital input and output) with analogue to digital convertor (ADC).</li>
<li><strong>1</strong>: GPIO with ADC</li>
<li><strong>2</strong>: GPIO with ADC</li>
</ul>
<p>The other two large pins (3V and GND) are very different!</p>

    <div class="ui info message">
        <div class="content">
            <p>Watch out! The pins labelled 3V and GND relate to the power supply of the board, and they should NEVER be connected together.
For details on the power, current and voltage limitations of the board, see <a target="_blank" rel="nofollow noopener" href="https://tech.microbit.org/hardware/powersupply/">Power Supply</a></p>

        </div>
    </div>
<p><em>power input</em>: If the Calliope mini is powered by USB or a battery, then you can use the 3V pin as a <em>power output</em> to power peripherals with.</p>
<ul>
<li><strong>3V</strong>: <em>3 volt power output</em> or <em>power input</em>.  (1) <em>power output</em>: If the Calliope mini is powered by USB or a battery, then you can use the 3V pin as a power output to power peripherals with; (2) <em>power input</em>: If the Calliope mini is not being powered by USB or battery, you can use the 3V pin as a power input to power the Calliope mini</li>
<li><strong>GND</strong>: attaches to ground in order to complete a circuit (required when using the 3V pin)</li>
</ul>
<p>If you hold the ‘GND’ pin with one hand, you can program the microbit to detect yourself touching the 0,1 or 2 pins with your other hand, giving you three more buttons to experiment with (you just used your body to complete an electrical circuit).</p>
<h2 id="small-pins">Small pins</h2><p>There are 20 small pins numbered sequentially from 3-22 (these pins are not labeled on the Calliope mini, however, they are labelled in the picture above).</p>
<p>Unlike the three large pins that are dedicated to being used for external connections, some of the small pins are shared with other components on the Calliope mini board. For example, pin 3 is shared with some of the LEDs on the screen of the Calliope mini, so if you are using the screen to scroll messages, you can’t use this pin as well.</p>
<ul>
<li><strong>pin 3</strong>: GPIO shared with LED Col 1 of the LED screen; can be used for ADC and digital I/O when the LED screen is turned off.</li>
<li><strong>pin 4</strong>: GPIO shared with LED Col 2 of the LED screen; can be used for ADC and digital I/O when the LED screen is turned off.</li>
<li><strong>pin 5</strong>: GPIO shared with Button A. This lets you trigger or detect a button “A” click externally. This pin has a pull-up resistor, which means that by default it is at voltage of 3V. To replace button A on the Calliope mini with an external button, connect one end of the external button to pin 5 and the other end to GND. When the button is pressed, the voltage on pin 5 is pulled down to 0, which generates a button click event.</li>
<li><strong>pin 6</strong>: GPIO shared with LED Col 9 of the LED screen;  can be used for digital I/O when the LED screen is turned off.</li>
<li><strong>pin 7</strong>: GPIO shared with LED Col 8 of the LED screen; can be used for digital I/O when the LED screen is turned off.</li>
<li><strong>pin 8</strong>: Dedicated GPIO, for sending and sensing digital signals.</li>
<li><strong>pin 9</strong>: GPIO shared with LED Col 7 of the LED screen;  can be used for digital I/O when the LED screen is turned off.</li>
<li><strong>pin 10</strong>: GPIO shared with LED Col 3 of the LED screen;  can be used for ADC and digital I/O when the LED screen is turned off.</li>
<li><strong>pin 11</strong>: GPIO shared with Button B. This lets you trigger or detect a button “B” click externally.</li>
<li><strong>pin 12</strong>: this GPIO pin has been reserved to provide support for accessibility.</li>
<li><strong>pin 13</strong>: GPIO that is conventionally used for the serial clock (SCK) signal of the 3-wire Serial Peripheral Interface (SPI) bus.</li>
<li><strong>pin 14</strong>: GPIO that is conventionally used for the Master In Slave Out (MISO) signal of the SPI bus.</li>
<li><strong>pin 15</strong>: GPIO that is conventionally used for the Master Out Slave In (MOSI) signal of the SPI bus.</li>
<li><strong>pin 16</strong>: Dedicated GPIO (conventionally also used for SPI ‘Chip Select’ function).</li>
<li><strong>pins 17 and 18</strong>: these pins are wired to the 3V supply, like the large ‘3V’ pad.</li>
<li><strong>pins 19 and 20</strong>: implement the clock signal (SCL) and data line (SDA) of the I2C bus communication protocol. With I2C, several devices can be connected on the same bus and send/read messages to and from the CPU. Internally, the accelerometer and the compass are connected to i2c.</li>
<li><strong>pins 21 and 22</strong>: these pins are wired to the GND pin and serve no other function</li>
</ul>
<h2 id="connecting-to-the-small-pins">Connecting to the small pins</h2><p>It is recommended that an edge connector be acquired to connect to the small pins. More information on compatible edge connectors will be available later.</p>

    </div>

					<div class="hideprint"></div>
				</div>

			</div>

			
<!-- include footer.html -->
<footer class="ui vertical footer segment hideprint docs inverted" aria-hidden="false">
    <div class="ui center aligned container">
        <div class="ui horizontal link list">
            <a
                class="item"
                href="https://twitter.com/intent/follow?screen_name=MsMakeCode"
                title="Follow us on Twitter"
                target="_blank"
                rel="noopener">
                <i class="huge icon twitter"></i>
            </a>
            <a class="item" href="https://www.youtube.com/channel/UCye7YlvFUUQ1dSy0WZZ1T_Q" title="Subscribe to our YouTube channel"
                target="_blank" rel="noopened">
                <i class="huge icon youtube"></i>
            </a>
            <a class="item" href="mailto:makecode@microsoft.com" title="Send us an Email"
                target="_blank" rel="noopened">
                <i class="huge icon mail"></i>
            </a>
        </div>
        <div class="ui section divider"></div>
        <div class="ui container horizontal small divided link list">
            <a id="langpicker" tabindex="0" class="ui item" rel="noopener">
                <i class="icon xicon globe" aria-hidden="true" role="presentation"></i>Language
            </a>
            <a class="item" href="https://makecode.com/privacy" target="_blank" rel="noopener">Privacy &amp; Cookies</a>
            <a class="item" href="https://makecode.com/termsofuse" target="_blank" rel="noopener">Terms Of Use</a>
            <a class="item" href="https://makecode.com/trademarks" target="_blank" rel="noopener">Trademarks</a>
            <span class="item">© 2022 Microsoft</span>
        </div>
        <div class="ui container horizontal small link list poweredBy">
            <span class="item">Powered by</span>
            <a class="middle aligned" href="https://makecode.com/" title="Microsoft MakeCode"
                target="_blank" rel="noopener">
                <img width="100" src="/static/logo/Microsoft-logo_rgb_c-gray.png" alt="Microsoft">
            </a>
        </div>
    </div>
</footer>

<!-- end include footer.html -->


		</div>

	</div>

    
<!-- include langpicker.html -->
<div id="langmodal" class="ui modal docs" role="dialog" aria-modal="true" aria-describedby="langmodalheader" tabindex="-1">
    <h2 id="langmodalheader" class="header">Select Language</h2>
    <div role="button" class="closeIcon" tabindex="0" aria-label="Close">
        <i class="icon close remove circle" aria-hidden="true"></i>
    </div>

	<div class="content">
	    <div class="group">
            <div id="availablelocales" class="ui cards centered" role="listbox" aria-label="List of available locales"></div>
        </div>
        <div class="ui" id="langmodalfooter">
            <a class="ui" href="/pxt-calliope-app/docs/translate.html" target="_blank" rel="noopener noreferrer">
                How do I add a new language?
            </a>

            <a id="translatebtn" class="ui button" role="button" tabindex="0">
                Translate this page
            </a>
        </div>
    </div>
</div>


<!-- end include langpicker.html -->

	
<!-- include macros.html -->
<!-- macro button -->

<!-- macro vimeo -->

<!-- macro youtube -->

<!-- macro section -->

<!-- macro hide -->

<!-- macro avatar -->

<!-- macro hint -->

<!-- macro codecard -->

<!-- macro tutorialhint -->

<!-- macro reminder -->

<!-- macro alert -->

<!-- macro tip -->

<!-- wrapped around ordinary content -->
<!-- macro main-container -->

<!-- used for 'column' box - they are collected and wrapped in 'column-container' -->
<!-- macro column -->
<!-- macro column-container -->


<!-- Menu on the top of the page -->
<!-- macro item -->

<!-- macro divider -->

<!-- TOC in the sidebar -->
<!-- macro item -->

<!-- macro divider -->

<!-- macro toc-dropdown -->

<!-- macro toc-dropdown-noLink -->

<!-- macro toc-dropdown-noHeading -->

<!-- TODO: duplicates of above for compatability with docsrender.ts;
    remove with pxtlib/docsrender.ts TOC TODOs after cloud bump. -->
<!-- macro top-dropdown -->

<!-- macro top-dropdown-noHeading -->

<!-- macro inner-dropdown -->

<!-- macro nested-dropdown -->
<!-- end include macros.html -->

	
<!-- include tracking.html -->
<script type="text/javascript" src="/pxt-calliope-app/pxtweb.js"></script>
<script type="text/javascript">
    window.loadAppInsights = function (includeCookie) {
        //Backend will patch / + doccdn + / with CDN url and the check that URL ends with the sha would pass
        var isProduction = includeCookie && (/[0-9a-f]{40}\/ai\.2\.min\.js$/.test("/pxt-calliope-app/ai.2.min.js"));
        !function(T,l,y){var S=T.location,k="script",D="connectionString",C="ingestionendpoint",I="disableExceptionTracking",E="ai.device.",b="toLowerCase",w="crossOrigin",N="POST",e="appInsightsSDK",t=y.name||"appInsights";(y.name||T[e])&&(T[e]=t);var n=T[t]||function(d){var g=!1,f=!1,m={initialize:!0,queue:[],sv:"5",version:2,config:d};function v(e,t){var n={},a="Browser";return n[E+"id"]=a[b](),n[E+"type"]=a,n["ai.operation.name"]=S&&S.pathname||"_unknown_",n["ai.internal.sdkVersion"]="javascript:snippet_"+(m.sv||m.version),{time:function(){var e=new Date;function t(e){var t=""+e;return 1===t.length&&(t="0"+t),t}return e.getUTCFullYear()+"-"+t(1+e.getUTCMonth())+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+((e.getUTCMilliseconds()/1e3).toFixed(3)+"").slice(2,5)+"Z"}(),iKey:e,name:"Microsoft.ApplicationInsights."+e.replace(/-/g,"")+"."+t,sampleRate:100,tags:n,data:{baseData:{ver:2}}}}var h=d.url||y.src;if(h){function a(e){var t,n,a,i,r,o,s,c,u,p,l;g=!0,m.queue=[],f||(f=!0,t=h,s=function(){var e={},t=d.connectionString;if(t)for(var n=t.split(";"),a=0;a<n.length;a++){var i=n[a].split("=");2===i.length&&(e[i[0][b]()]=i[1])}if(!e[C]){var r=e.endpointsuffix,o=r?e.location:null;e[C]="https://"+(o?o+".":"")+"dc."+(r||"services.visualstudio.com")}return e}(),c=s[D]||d[D]||"",u=s[C],p=u?u+"/v2/track":d.endpointUrl,(l=[]).push((n="SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details)",a=t,i=p,(o=(r=v(c,"Exception")).data).baseType="ExceptionData",o.baseData.exceptions=[{typeName:"SDKLoadFailed",message:n.replace(/\./g,"-"),hasFullStack:!1,stack:n+"\nSnippet failed to load ["+a+"] -- Telemetry is disabled\nHelp Link: https://go.microsoft.com/fwlink/?linkid=2128109\nHost: "+(S&&S.pathname||"_unknown_")+"\nEndpoint: "+i,parsedStack:[]}],r)),l.push(function(e,t,n,a){var i=v(c,"Message"),r=i.data;r.baseType="MessageData";var o=r.baseData;return o.message='AI (Internal): 99 message:"'+("SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details) ("+n+")").replace(/\"/g,"")+'"',o.properties={endpoint:a},i}(0,0,t,p)),function(e,t){if(JSON){var n=T.fetch;if(n&&!y.useXhr)n(t,{method:N,body:JSON.stringify(e),mode:"cors"});else if(XMLHttpRequest){var a=new XMLHttpRequest;a.open(N,t),a.setRequestHeader("Content-type","application/json"),a.send(JSON.stringify(e))}}}(l,p))}function i(e,t){f||setTimeout(function(){!t&&m.core||a()},500)}var e=function(){var n=l.createElement(k);n.src=h;var e=y[w];return!e&&""!==e||"undefined"==n[w]||(n[w]=e),n.onload=i,n.onerror=a,n.onreadystatechange=function(e,t){"loaded"!==n.readyState&&"complete"!==n.readyState||i(0,t)},n}();y.ld<0?l.getElementsByTagName("head")[0].appendChild(e):setTimeout(function(){l.getElementsByTagName(k)[0].parentNode.appendChild(e)},y.ld||0)}try{m.cookie=l.cookie}catch(p){}function t(e){for(;e.length;)!function(t){m[t]=function(){var e=arguments;g||m.queue.push(function(){m[t].apply(m,e)})}}(e.pop())}var n="track",r="TrackPage",o="TrackEvent";t([n+"Event",n+"PageView",n+"Exception",n+"Trace",n+"DependencyData",n+"Metric",n+"PageViewPerformance","start"+r,"stop"+r,"start"+o,"stop"+o,"addTelemetryInitializer","setAuthenticatedUserContext","clearAuthenticatedUserContext","flush"]),m.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4};var s=(d.extensionConfig||{}).ApplicationInsightsAnalytics||{};if(!0!==d[I]&&!0!==s[I]){var c="onerror";t(["_"+c]);var u=T[c];T[c]=function(e,t,n,a,i){var r=u&&u(e,t,n,a,i);return!0!==r&&m["_"+c]({message:e,url:t,lineNumber:n,columnNumber:a,error:i}),r},d.autoExceptionInstrumented=!0}return m}(y.cfg);function a(){y.onInit&&y.onInit(n)}(T[t]=n).queue&&0===n.queue.length?(n.queue.push(a),n.trackPageView({})):a()}(window,document,{
            src: "https://js.monitor.azure.com/scripts/b/ai.2.min.js", // The SDK URL Source
            onInit: function (sdk) {
                sdk.addTelemetryInitializer(function (envelope) {
                    // App Insights automatically sends a page view event on setup, but we send our own later with additional properties.
                    // This stops the automatic event from firing, so we don't end up with duplicate page view events.
                    if (envelope.baseType == "PageviewData" && !envelope.baseData.properties) {
                        return false;
                    }

                    if (envelope.baseType == "PageviewPerformanceData") {
                        var pageName = envelope.baseData.name;
                        envelope.baseData.name = window.location.origin;
                        if (!envelope.baseData.properties) {
                            envelope.baseData.properties = {};
                        }
                        envelope.baseData.properties.pageName = pageName;
                        var scrubbedUrl = scrubUrl(envelope.baseData.uri);
                        envelope.baseData.uri = scrubbedUrl;
                        var toUrl = new URL(scrubbedUrl);
                        envelope.baseData.properties.pathName = toUrl ? toUrl.pathname : "";
                        if (envelope.ext && envelope.ext.trace) {
                            envelope.ext.trace.name = toUrl ? toUrl.pathname : "";
                        }
                    }

                    var telemetryItem = envelope.baseData;
                    telemetryItem.properties = telemetryItem.properties || {};
                    telemetryItem.properties["cookie"] = isProduction;
                    if (typeof pxtConfig === "undefined" || !pxtConfig || !pxtConfig.targetId) {
                        telemetryItem.properties["target"] = "calliopemini";
                        return true;
                    }
                    telemetryItem.properties["target"] = pxtConfig.targetId;
                    telemetryItem.properties["stage"] = (pxtConfig.relprefix || "/--").replace(/[^a-z]/ig, '')
                    if (typeof Windows !== "undefined")
                        telemetryItem.properties["WindowsApp"] = 1;
                    var userAgent = navigator.userAgent.toLowerCase();
                    var userAgentRegexResult = /\belectron\/(\d+\.\d+\.\d+.*?)(?: |$)/i.exec(userAgent); // Example navigator.userAgent: "Mozilla/5.0 Chrome/61.0.3163.100 Electron/2.0.0 Safari/537.36"
                    if (userAgentRegexResult) {
                        telemetryItem.properties["Electron"] = 1;
                        telemetryItem.properties["ElectronVersion"] = userAgentRegexResult[1];
                    }
                    if (typeof pxtElectron !== "undefined") {
                        telemetryItem.properties["PxtElectron"] = 1;
                        telemetryItem.properties["ElectronVersion"] = pxtElectron.versions.electronVersion;
                        telemetryItem.properties["ChromiumVersion"] = pxtElectron.versions.chromiumVersion;
                        telemetryItem.properties["NodeVersion"] = pxtElectron.versions.nodeVersion;
                        telemetryItem.properties["PxtElectronVersion"] = pxtElectron.versions.pxtElectronVersion;
                        telemetryItem.properties["PxtCoreVersion"] = pxtElectron.versions.pxtCoreVersion;
                        telemetryItem.properties["PxtTargetVersion"] = pxtElectron.versions.pxtTargetVersion;
                        telemetryItem.properties["PxtElectronIsProd"] = pxtElectron.versions.isProd;
                    }
                    return true;
                });
            },
            cfg: {
                instrumentationKey:"9801ed01-c40f-46ec-aa40-2a1742a9e71c",
                disableAjaxTracking: true,
                overridePageViewDuration: false,
                disableExceptionTracking: true,
                disableCookiesUsage: !isProduction,
                isStorageUseDisabled: !isProduction,
                url: "/pxt-calliope-app/ai.2.min.js"
            }
        });
        window.appInsights=appInsights;
        var location = window.location.toString();
        appInsights.trackPageView({
            name: window.location.hostname,
            uri: window.location.origin,
            properties: {
                url: scrubUrl(location),
                urlReferrer: scrubUrl(document.referrer.toString())
            }
        });

        // Scrub potential PII from the URL.
        function scrubUrl(url) {
            if (!url) return url;

            var scriptIdRegex = /(?:S?\d{5}-\d{5}-\d{5}-\d{5})|(?:_[0-9a-zA-Z]{12})/g;
            var scrubbedUrl = new URL(url.toLocaleLowerCase().replace(scriptIdRegex, "xxxxx-xxxxx-xxxxx-xxxxx"));

            // Just as a precaution, strip any suspicious query parameters.
            var blockedParamKeywords = ["username", "password", "token", "pwd"];
            var searchParams = Array.from(scrubbedUrl.searchParams.keys());
            for (var param of searchParams) {
                if (blockedParamKeywords.some(k => param.indexOf(k) != -1)) {
                    scrubbedUrl.searchParams.delete(param);
                }
            }

            return scrubbedUrl.toString();
        }

        return isProduction;
    }
    pxt.initAnalyticsAsync();
</script>

<!-- end include tracking.html -->


</body>

</html>